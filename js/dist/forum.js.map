{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@archlinux-de/flarum-click-image/webpack/bootstrap","webpack://@archlinux-de/flarum-click-image/webpack/runtime/compat get default export","webpack://@archlinux-de/flarum-click-image/webpack/runtime/define property getters","webpack://@archlinux-de/flarum-click-image/webpack/runtime/hasOwnProperty shorthand","webpack://@archlinux-de/flarum-click-image/external root \"flarum.core.compat['forum/app']\"","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js","webpack://@archlinux-de/flarum-click-image/./src/forum/ClickImage.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@archlinux-de/flarum-click-image/./src/forum/ClickImage.css","webpack://@archlinux-de/flarum-click-image/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","function _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nexport { _getPrototypeOf as default };","function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nexport { _isNativeReflectConstruct as default };","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nfunction _wrapNativeSuper(t) {\n  var r = \"function\" == typeof Map ? new Map() : void 0;\n  return _wrapNativeSuper = function _wrapNativeSuper(t) {\n    if (null === t || !isNativeFunction(t)) return t;\n    if (\"function\" != typeof t) throw new TypeError(\"Super expression must either be null or a function\");\n    if (void 0 !== r) {\n      if (r.has(t)) return r.get(t);\n      r.set(t, Wrapper);\n    }\n    function Wrapper() {\n      return construct(t, arguments, getPrototypeOf(this).constructor);\n    }\n    return Wrapper.prototype = Object.create(t.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0\n      }\n    }), setPrototypeOf(Wrapper, t);\n  }, _wrapNativeSuper(t);\n}\nexport { _wrapNativeSuper as default };","function _isNativeFunction(t) {\n  try {\n    return -1 !== Function.toString.call(t).indexOf(\"[native code]\");\n  } catch (n) {\n    return \"function\" == typeof t;\n  }\n}\nexport { _isNativeFunction as default };","import isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _construct(t, e, r) {\n  if (isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments);\n  var o = [null];\n  o.push.apply(o, e);\n  var p = new (t.bind.apply(t, o))();\n  return r && setPrototypeOf(p, r.prototype), p;\n}\nexport { _construct as default };","function _classPrivateFieldBase(e, t) {\n  if (!{}.hasOwnProperty.call(e, t)) throw new TypeError(\"attempted to use private field on non-instance\");\n  return e;\n}\nexport { _classPrivateFieldBase as default };","var id = 0;\nfunction _classPrivateFieldKey(e) {\n  return \"__private_\" + id++ + \"_\" + e;\n}\nexport { _classPrivateFieldKey as default };","import app from 'flarum/forum/app';\nimport styles from '!!raw-loader!./ClickImage.css';\n\nexport default class ClickImage extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n  }\n\n  connectedCallback() {\n    this.shadowRoot.appendChild(this.#createStyle());\n    try {\n      const src = this.getAttribute('src');\n      const hostname = src.startsWith('/') ? window.location.hostname : new URL(src).hostname;\n      const placeHolder = this.#createPlaceholder(hostname);\n\n      placeHolder.addEventListener(\n        'click',\n        (event) => {\n          placeHolder.classList.add('loading');\n          event.preventDefault();\n          const img = this.#createImg();\n          img.onerror = () => {\n            placeHolder.classList.remove('loading');\n            placeHolder.classList.add('error');\n          };\n          img.onload = () => {\n            placeHolder.style.width = `min(${img.width}px, 100%)`;\n            placeHolder.style.height = 'auto';\n            placeHolder.style.aspectRatio = `${img.width} / ${img.height}`;\n            setTimeout(() => this.replaceWith(img), 200);\n          };\n        },\n        { once: true }\n      );\n      this.shadowRoot.appendChild(placeHolder);\n    } catch (e) {\n      const placeHolder = this.#createPlaceholder(this.getAttribute('src'));\n      placeHolder.classList.add('error');\n      this.shadowRoot.appendChild(placeHolder);\n    }\n  }\n\n  #createPlaceholder(hostname) {\n    const div = document.createElement('div');\n    div.innerHTML = `\n        <span class=\"placeholder-message\">${app.translator\n          .trans('archlinux-de-flarum-click-image.forum.load_button', { domain: hostname })\n          .join('')}</span>\n        <span class=\"error-message\">${app.translator\n          .trans('archlinux-de-flarum-click-image.forum.error_message', { domain: hostname })\n          .join('')}</span>\n      `;\n    return div;\n  }\n\n  #createStyle() {\n    const style = document.createElement('style');\n    style.innerHTML = styles;\n\n    return style;\n  }\n\n  #createImg() {\n    const img = document.createElement('img');\n    if (this.getAttribute('height') > 0) {\n      img.height = this.getAttribute('height');\n    }\n    if (this.getAttribute('width') > 0) {\n      img.height = this.getAttribute('width');\n    }\n    if (this.getAttribute('alt').length > 0) {\n      img.alt = this.getAttribute('alt');\n    }\n    if (this.getAttribute('title').length > 0) {\n      img.title = this.getAttribute('title');\n    }\n    img.src = this.getAttribute('src');\n    return img;\n  }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","export default \":host {\\n  --background-color: #ccc;\\n  --border-color: #ddd;\\n  --color: #333;\\n  --error-color: #f00;\\n}\\n\\ndiv {\\n  padding: 8px;\\n  box-sizing: border-box;\\n  border: 1px solid var(--border-color);\\n  height: 150px;\\n  width: 100%;\\n  max-width: 100%;\\n  display: inline-flex;\\n  justify-content: center;\\n  align-items: center;\\n  background-color: var(--background-color);\\n  cursor: pointer;\\n  transition:\\n    width 0.2s ease-in-out,\\n    height 0.2s ease-in-out;\\n}\\n\\nspan {\\n  font-family: sans-serif;\\n  font-size: 14px;\\n  color: var(--color);\\n}\\n\\na {\\n  color: unset;\\n}\\n\\n.error-message {\\n  display: none;\\n}\\n\\n.error .placeholder-message {\\n  display: none;\\n}\\n\\n.error .error-message {\\n  display: inline-block;\\n}\\n\\n.loading {\\n  cursor: wait;\\n}\\n\\n.loading span {\\n  display: none;\\n}\\n\\n.loading::before {\\n  content: ' ';\\n}\\n\\n.error {\\n  cursor: unset;\\n}\\n\\n.error span {\\n  color: var(--error-color);\\n}\\n\";","import app from 'flarum/forum/app';\nimport ClickImage from './ClickImage';\n\napp.initializers.add('archlinux-de/flarum-click-image', () => {\n  customElements.define('click-img', ClickImage);\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","_getPrototypeOf","getPrototypeOf","_isNativeReflectConstruct","Boolean","valueOf","Reflect","construct","_wrapNativeSuper","r","Map","Function","toString","indexOf","n","isNativeFunction","TypeError","has","set","Wrapper","isNativeReflectConstruct","apply","arguments","push","p","this","constructor","create","value","writable","configurable","_classPrivateFieldBase","id","_classPrivateFieldKey","_createPlaceholder","_classPrivateFieldLooseKey","_createStyle","_createImg","ClickImage","_HTMLElement","_this","_createImg2","_createStyle2","_createPlaceholder2","attachShadow","mode","connectedCallback","_this2","shadowRoot","appendChild","_classPrivateFieldLooseBase","src","getAttribute","hostname","startsWith","window","location","URL","placeHolder","addEventListener","event","classList","add","preventDefault","img","onerror","remove","onload","style","width","height","aspectRatio","setTimeout","replaceWith","once","HTMLElement","div","document","createElement","innerHTML","app","trans","domain","join","length","alt","title","customElements","define"],"sourceRoot":""}