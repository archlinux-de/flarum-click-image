{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@archlinux-de/click-image/webpack/bootstrap","webpack://@archlinux-de/click-image/webpack/runtime/compat get default export","webpack://@archlinux-de/click-image/webpack/runtime/define property getters","webpack://@archlinux-de/click-image/webpack/runtime/hasOwnProperty shorthand","webpack://@archlinux-de/click-image/webpack/runtime/make namespace object","webpack://@archlinux-de/click-image/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@archlinux-de/click-image/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@archlinux-de/click-image/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://@archlinux-de/click-image/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://@archlinux-de/click-image/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://@archlinux-de/click-image/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://@archlinux-de/click-image/external root \"flarum.core.compat['forum/app']\"","webpack://@archlinux-de/click-image/./src/forum/index.js","webpack://@archlinux-de/click-image/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","import app from 'flarum/forum/app';\n\nclass ClickImage extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n  }\n\n  connectedCallback() {\n    this.shadowRoot.appendChild(this._createStyle());\n    try {\n      const hostname = new URL(this.getAttribute('src')).hostname;\n      const placeHolder = this._createPlaceholder(hostname);\n\n      placeHolder.addEventListener(\n        'click',\n        (event) => {\n          placeHolder.classList.add('loading');\n          event.preventDefault();\n          const img = this._createImg();\n          img.onerror = () => {\n            placeHolder.classList.remove('loading');\n            placeHolder.classList.add('error');\n          };\n          img.onload = () => {\n            placeHolder.style.width = `min(${img.width}px, 100%)`;\n            placeHolder.style.height = 'auto';\n            placeHolder.style.aspectRatio = `${img.width} / ${img.height}`;\n            setTimeout(() => placeHolder.replaceWith(img), 200);\n          };\n        },\n        { once: true }\n      );\n      this.shadowRoot.appendChild(placeHolder);\n    } catch (e) {\n      const placeHolder = this._createPlaceholder(this.getAttribute('src'));\n      placeHolder.classList.add('error');\n      this.shadowRoot.appendChild(placeHolder);\n    }\n  }\n\n  _createPlaceholder(hostname) {\n    const div = document.createElement('div');\n    div.innerHTML = `\n        <span class=\"placeholder-message\">Bild von <strong>${hostname}</strong> laden</span>\n        <span class=\"error-message\">\n          Bild konnte nicht von\n          <a href=\"${this.getAttribute('src')}\" target=\"_blank\" rel=\"nofollow\">${hostname}</a>\n          geladen werden!\n        </span>\n      `;\n    return div;\n  }\n\n  _createStyle() {\n    const style = document.createElement('style');\n    style.innerHTML = `\n        div {\n          padding: 8px;\n          box-sizing: border-box;\n          border: 1px solid #fff;\n          height: 150px;\n          width: 100%;\n          max-width: 100%;\n          display: inline-flex;\n          justify-content: center;\n          align-items: center;\n          background-color: #ededed;\n          cursor: pointer;\n          transition: width .2s ease-in-out, height .2s ease-in-out;\n        }\n        img {\n          vertical-align: middle;\n          max-width: 100%;\n        }\n        span {\n          font-family: sans-serif;\n          font-size: 14px;\n          color: #808080;\n        }\n        a {\n          color: unset;\n        }\n        .error-message {\n          display: none;\n        }\n        .error .placeholder-message {\n          display: none;\n        }\n        .error .error-message {\n          display: inline-block;\n        }\n        .loading {\n          cursor: wait;\n        }\n        .loading span {\n          display: none;\n        }\n        .loading::before {\n          content: ' '\n        }\n        .error {\n          cursor: unset;\n        }\n        .error span {\n          color: #B72A2A;\n        }\n      `;\n\n    return style;\n  }\n\n  _createImg() {\n    const img = document.createElement('img');\n    if (this.getAttribute('height') > 0) {\n      img.height = this.getAttribute('height');\n    }\n    if (this.getAttribute('width') > 0) {\n      img.height = this.getAttribute('width');\n    }\n    if (this.getAttribute('alt').length > 0) {\n      img.alt = this.getAttribute('alt');\n    }\n    if (this.getAttribute('title').length > 0) {\n      img.title = this.getAttribute('title');\n    }\n    img.src = this.getAttribute('src');\n    return img;\n  }\n}\n\napp.initializers.add('archlinux-de/click-image', () => {\n  customElements.define('click-img', ClickImage);\n});\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","_setPrototypeOf","p","setPrototypeOf","__proto__","_getPrototypeOf","getPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","e","_construct","Parent","args","Class","isNativeReflectConstruct","push","apply","instance","Function","bind","arguments","_wrapNativeSuper","_cache","Map","undefined","fn","toString","indexOf","TypeError","has","set","Wrapper","this","constructor","create","writable","configurable","flarum","core","compat","ClickImage","subClass","superClass","attachShadow","mode","connectedCallback","shadowRoot","appendChild","_createStyle","hostname","URL","getAttribute","placeHolder","_createPlaceholder","addEventListener","event","classList","add","preventDefault","img","_createImg","onerror","remove","onload","style","width","height","aspectRatio","setTimeout","replaceWith","once","div","document","createElement","innerHTML","length","alt","title","src","HTMLElement","app","customElements","define"],"sourceRoot":""}