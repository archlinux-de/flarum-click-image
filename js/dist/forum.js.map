{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@archlinux-de/flarum-click-image/webpack/bootstrap","webpack://@archlinux-de/flarum-click-image/webpack/runtime/compat get default export","webpack://@archlinux-de/flarum-click-image/webpack/runtime/define property getters","webpack://@archlinux-de/flarum-click-image/webpack/runtime/hasOwnProperty shorthand","webpack://@archlinux-de/flarum-click-image/webpack/runtime/make namespace object","webpack://@archlinux-de/flarum-click-image/external root \"flarum.core.compat['forum/app']\"","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://@archlinux-de/flarum-click-image/./src/forum/ClickImage.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@archlinux-de/flarum-click-image/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import app from 'flarum/forum/app';\n\nexport default class ClickImage extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n  }\n\n  connectedCallback() {\n    this.shadowRoot.appendChild(this._createStyle());\n    try {\n      const src = this.getAttribute('src');\n      const hostname = src.startsWith('/') ? window.location.hostname : new URL(src).hostname;\n      const placeHolder = this._createPlaceholder(hostname);\n\n      placeHolder.addEventListener(\n        'click',\n        (event) => {\n          placeHolder.classList.add('loading');\n          event.preventDefault();\n          const img = this._createImg();\n          img.onerror = () => {\n            placeHolder.classList.remove('loading');\n            placeHolder.classList.add('error');\n          };\n          img.onload = () => {\n            placeHolder.style.width = `min(${img.width}px, 100%)`;\n            placeHolder.style.height = 'auto';\n            placeHolder.style.aspectRatio = `${img.width} / ${img.height}`;\n            setTimeout(() => this.replaceWith(img), 200);\n          };\n        },\n        { once: true }\n      );\n      this.shadowRoot.appendChild(placeHolder);\n    } catch (e) {\n      const placeHolder = this._createPlaceholder(this.getAttribute('src'));\n      placeHolder.classList.add('error');\n      this.shadowRoot.appendChild(placeHolder);\n    }\n  }\n\n  _createPlaceholder(hostname) {\n    const div = document.createElement('div');\n    div.innerHTML = `\n        <span class=\"placeholder-message\">${app.translator\n          .trans('archlinux-de-flarum-click-image.forum.load_button', { domain: hostname })\n          .join('')}</span>\n        <span class=\"error-message\">${app.translator\n          .trans('archlinux-de-flarum-click-image.forum.error_message', { domain: hostname })\n          .join('')}</span>\n      `;\n    return div;\n  }\n\n  _createStyle() {\n    const style = document.createElement('style');\n    style.innerHTML = `\n        :host {\n          --background-color: #ccc;\n          --border-color: #ddd;\n          --color: #333;\n          --error-color: #f00;\n        }\n        div {\n          padding: 8px;\n          box-sizing: border-box;\n          border: 1px solid var(--border-color);\n          height: 150px;\n          width: 100%;\n          max-width: 100%;\n          display: inline-flex;\n          justify-content: center;\n          align-items: center;\n          background-color: var(--background-color);\n          cursor: pointer;\n          transition: width .2s ease-in-out, height .2s ease-in-out;\n        }\n        span {\n          font-family: sans-serif;\n          font-size: 14px;\n          color: var(--color);\n        }\n        a {\n          color: unset;\n        }\n        .error-message {\n          display: none;\n        }\n        .error .placeholder-message {\n          display: none;\n        }\n        .error .error-message {\n          display: inline-block;\n        }\n        .loading {\n          cursor: wait;\n        }\n        .loading span {\n          display: none;\n        }\n        .loading::before {\n          content: ' '\n        }\n        .error {\n          cursor: unset;\n        }\n        .error span {\n          color: var(--error-color);\n        }\n      `;\n\n    return style;\n  }\n\n  _createImg() {\n    const img = document.createElement('img');\n    if (this.getAttribute('height') > 0) {\n      img.height = this.getAttribute('height');\n    }\n    if (this.getAttribute('width') > 0) {\n      img.height = this.getAttribute('width');\n    }\n    if (this.getAttribute('alt').length > 0) {\n      img.alt = this.getAttribute('alt');\n    }\n    if (this.getAttribute('title').length > 0) {\n      img.title = this.getAttribute('title');\n    }\n    img.src = this.getAttribute('src');\n    return img;\n  }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import app from 'flarum/forum/app';\nimport ClickImage from './ClickImage';\n\napp.initializers.add('archlinux-de/flarum-click-image', () => {\n  customElements.define('click-img', ClickImage);\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","_getPrototypeOf","getPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","e","_construct","Parent","args","Class","isNativeReflectConstruct","push","apply","instance","Function","bind","arguments","_wrapNativeSuper","_cache","Map","undefined","fn","toString","indexOf","TypeError","has","set","Wrapper","this","constructor","create","writable","configurable","ClickImage","subClass","superClass","attachShadow","mode","connectedCallback","shadowRoot","appendChild","_createStyle","src","getAttribute","hostname","startsWith","window","location","URL","placeHolder","_createPlaceholder","addEventListener","event","classList","add","preventDefault","img","_createImg","onerror","remove","onload","style","width","height","aspectRatio","setTimeout","replaceWith","once","div","document","createElement","innerHTML","app","domain","join","length","alt","title","HTMLElement","customElements","define"],"sourceRoot":""}