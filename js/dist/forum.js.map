{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,+BCL9D,MAAM,EAA+BC,OAAOC,KAAKC,OAAO,a,aCAzC,SAASC,EAAuBC,GAC7C,QAAa,IAATA,EACF,MAAM,IAAIC,eAAe,6DAE3B,OAAOD,CACT,CCLe,SAASE,EAAgBnB,EAAGoB,GAKzC,OAJAD,EAAkBlB,OAAOoB,eAAiBpB,OAAOoB,eAAeC,OAAS,SAAyBtB,EAAGoB,GAEnG,OADApB,EAAEuB,UAAYH,EACPpB,CACT,EACOmB,EAAgBnB,EAAGoB,EAC5B,CCNe,SAASI,EAAgBxB,GAItC,OAHAwB,EAAkBvB,OAAOoB,eAAiBpB,OAAOwB,eAAeH,OAAS,SAAyBtB,GAChG,OAAOA,EAAEuB,WAAatB,OAAOwB,eAAezB,EAC9C,EACOwB,EAAgBxB,EACzB,CCHe,SAAS0B,EAAWC,EAAQC,EAAMC,GAa/C,OATEH,ECNW,WACb,GAAuB,oBAAZI,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,mBAAVC,MAAsB,OAAO,EACxC,IAEE,OADAC,QAAQ3B,UAAU4B,QAAQ1B,KAAKqB,QAAQC,UAAUG,QAAS,IAAI,WAAa,MACpE,CACT,CAAE,MAAOE,GACP,OAAO,CACT,CACF,CDPMC,GACWP,QAAQC,UAAUT,OAElB,SAAoBK,EAAQC,EAAMC,GAC7C,IAAIjC,EAAI,CAAC,MACTA,EAAE0C,KAAKC,MAAM3C,EAAGgC,GAChB,IACIY,EAAW,IADGC,SAASnB,KAAKiB,MAAMZ,EAAQ/B,IAG9C,OADIiC,GAAOR,EAAemB,EAAUX,EAAMtB,WACnCiC,CACT,EAEKd,EAAWa,MAAM,KAAMG,UAChC,CEZe,SAASC,EAAiBd,GACvC,IAAIe,EAAwB,mBAARC,IAAqB,IAAIA,SAAQC,EAuBrD,OAtBAH,EAAmB,SAA0Bd,GAC3C,GAAc,OAAVA,ICPO,SAA2BkB,GACxC,IACE,OAAgE,IAAzDN,SAASO,SAASvC,KAAKsC,GAAIE,QAAQ,gBAC5C,CAAE,MAAOb,GACP,MAAqB,mBAAPW,CAChB,CACF,CDC2BG,CAAiBrB,GAAQ,OAAOA,EACvD,GAAqB,mBAAVA,EACT,MAAM,IAAIsB,UAAU,sDAEtB,QAAsB,IAAXP,EAAwB,CACjC,GAAIA,EAAOQ,IAAIvB,GAAQ,OAAOe,EAAOxC,IAAIyB,GACzCe,EAAOS,IAAIxB,EAAOyB,EACpB,CACA,SAASA,IACP,OAAOvB,EAAUF,EAAOa,UAAWjB,EAAe8B,MAAMC,YAC1D,CASA,OARAF,EAAQ/C,UAAYN,OAAOwD,OAAO5B,EAAMtB,UAAW,CACjDiD,YAAa,CACX5C,MAAO0C,EACPnD,YAAY,EACZuD,UAAU,EACVC,cAAc,KAGXtC,EAAeiC,EAASzB,EACjC,EACOc,EAAiBd,EAC1B,CE7Be,SAAS+B,EAAuBC,EAAUC,GACvD,IAAK7D,OAAOM,UAAUC,eAAeC,KAAKoD,EAAUC,GAClD,MAAM,IAAIX,UAAU,kDAEtB,OAAOU,CACT,CCLA,IAAIE,EAAK,EACM,SAASC,EAAsBC,GAC5C,MAAO,aAAeF,IAAO,IAAME,CACrC,CCFmD,IAAAC,EAAAC,EAAA,qBAAAC,EAAAD,EAAA,eAAAE,EAAAF,EAAA,aAE9BG,EAAU,SAAAC,GCFhB,IAAwBC,EAAUC,EDG/C,SAAAH,IAAc,IAAAI,EAEwB,OADpCA,EAAAH,EAAA9D,KAAA,OAAO,KAACR,OAAAC,eAAAc,EAAA0D,GAAAL,EAAA,CAAAzD,MAAA+D,IAAA1E,OAAAC,eAAAc,EAAA0D,GAAAN,EAAA,CAAAxD,MAAAgE,IAAA3E,OAAAC,eAAAc,EAAA0D,GAAAR,EAAA,CAAAtD,MAAAiE,IACRH,EAAKI,aAAa,CAAEC,KAAM,SAAUL,CACtC,CAkCC,OCxC8CD,EDElBF,GCFQC,EDERF,GCDpB/D,UAAYN,OAAOwD,OAAOgB,EAAWlE,WAC9CiE,EAASjE,UAAUiD,YAAcgB,EACjCnD,EAAemD,EAAUC,GDGxBH,EAAA/D,UAEDyE,kBAAA,WAAoB,IAAAC,EAAA,KAClB1B,KAAK2B,WAAWC,YAAWC,EAAC7B,KAAIa,GAAAA,MAChC,IACE,IAAMiB,EAAM9B,KAAK+B,aAAa,OACxBC,EAAWF,EAAIG,WAAW,KAAOC,OAAOC,SAASH,SAAW,IAAII,IAAIN,GAAKE,SACzEK,EAAWR,EAAG7B,KAAIW,GAAAA,GAAoBqB,GAE5CK,EAAYC,iBACV,SACA,SAACC,GACCF,EAAYG,UAAUC,IAAI,WAC1BF,EAAMG,iBACN,IAAMC,EAAGd,EAAGH,EAAIZ,GAAAA,KAChB6B,EAAIC,QAAU,WACZP,EAAYG,UAAUK,OAAO,WAC7BR,EAAYG,UAAUC,IAAI,QAC5B,EACAE,EAAIG,OAAS,WACXT,EAAYU,MAAMC,MAAQ,OAAOL,EAAIK,MAAK,YAC1CX,EAAYU,MAAME,OAAS,OAC3BZ,EAAYU,MAAMG,YAAiBP,EAAIK,MAAK,MAAML,EAAIM,OACtDE,YAAW,kBAAMzB,EAAK0B,YAAYT,EAAI,GAAE,IAC1C,CACF,GACA,CAAEU,MAAM,IAEVrD,KAAK2B,WAAWC,YAAYS,EAC9B,CAAE,MAAOxD,GACP,IAAMwD,EAAWR,EAAG7B,KAAIW,GAAAA,GAAoBX,KAAK+B,aAAa,QAC9DM,EAAYG,UAAUC,IAAI,SAC1BzC,KAAK2B,WAAWC,YAAYS,EAC9B,CACF,EAACtB,CAAA,CAtC4B,CAsC5B3B,EAtCqCkE,cAAW,SAAAhC,EAwC9BU,GACjB,IAAMuB,EAAMC,SAASC,cAAc,OASnC,OARAF,EAAIG,UAAY,+CACwBC,IAAAA,WACjCC,MAAM,oDAAqD,CAAEC,OAAQ7B,IACrE8B,KAAK,IAAG,gDACmBH,IAAAA,WAC3BC,MAAM,sDAAuD,CAAEC,OAAQ7B,IACvE8B,KAAK,IAAG,kBAERP,CACT,CAAC,SAAAlC,IAGC,IAAM0B,EAAQS,SAASC,cAAc,SAGrC,OAFAV,EAAMW,UE1DV,86BF4DWX,CACT,CAAC,SAAA3B,IAGC,IAAMuB,EAAMa,SAASC,cAAc,OAcnC,OAbIzD,KAAK+B,aAAa,UAAY,IAChCY,EAAIM,OAASjD,KAAK+B,aAAa,WAE7B/B,KAAK+B,aAAa,SAAW,IAC/BY,EAAIM,OAASjD,KAAK+B,aAAa,UAE7B/B,KAAK+B,aAAa,OAAOgC,OAAS,IACpCpB,EAAIqB,IAAMhE,KAAK+B,aAAa,QAE1B/B,KAAK+B,aAAa,SAASgC,OAAS,IACtCpB,EAAIsB,MAAQjE,KAAK+B,aAAa,UAEhCY,EAAIb,IAAM9B,KAAK+B,aAAa,OACrBY,CACT,CG5EFgB,IAAAA,aAAiBlB,IAAI,mCAAmC,WACtDyB,eAAeC,OAAO,YAAapD,EACrC,G","sources":["webpack://@archlinux-de/flarum-click-image/webpack/bootstrap","webpack://@archlinux-de/flarum-click-image/webpack/runtime/compat get default export","webpack://@archlinux-de/flarum-click-image/webpack/runtime/define property getters","webpack://@archlinux-de/flarum-click-image/webpack/runtime/hasOwnProperty shorthand","webpack://@archlinux-de/flarum-click-image/webpack/runtime/make namespace object","webpack://@archlinux-de/flarum-click-image/external root \"flarum.core.compat['forum/app']\"","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js","webpack://@archlinux-de/flarum-click-image/./src/forum/ClickImage.js","webpack://@archlinux-de/flarum-click-image/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@archlinux-de/flarum-click-image/./src/forum/ClickImage.css","webpack://@archlinux-de/flarum-click-image/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  try {\n    return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n  } catch (e) {\n    return typeof fn === \"function\";\n  }\n}","export default function _classPrivateFieldBase(receiver, privateKey) {\n  if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n    throw new TypeError(\"attempted to use private field on non-instance\");\n  }\n  return receiver;\n}","var id = 0;\nexport default function _classPrivateFieldKey(name) {\n  return \"__private_\" + id++ + \"_\" + name;\n}","import app from 'flarum/forum/app';\nimport styles from '!!raw-loader!./ClickImage.css';\n\nexport default class ClickImage extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n  }\n\n  connectedCallback() {\n    this.shadowRoot.appendChild(this.#createStyle());\n    try {\n      const src = this.getAttribute('src');\n      const hostname = src.startsWith('/') ? window.location.hostname : new URL(src).hostname;\n      const placeHolder = this.#createPlaceholder(hostname);\n\n      placeHolder.addEventListener(\n        'click',\n        (event) => {\n          placeHolder.classList.add('loading');\n          event.preventDefault();\n          const img = this.#createImg();\n          img.onerror = () => {\n            placeHolder.classList.remove('loading');\n            placeHolder.classList.add('error');\n          };\n          img.onload = () => {\n            placeHolder.style.width = `min(${img.width}px, 100%)`;\n            placeHolder.style.height = 'auto';\n            placeHolder.style.aspectRatio = `${img.width} / ${img.height}`;\n            setTimeout(() => this.replaceWith(img), 200);\n          };\n        },\n        { once: true }\n      );\n      this.shadowRoot.appendChild(placeHolder);\n    } catch (e) {\n      const placeHolder = this.#createPlaceholder(this.getAttribute('src'));\n      placeHolder.classList.add('error');\n      this.shadowRoot.appendChild(placeHolder);\n    }\n  }\n\n  #createPlaceholder(hostname) {\n    const div = document.createElement('div');\n    div.innerHTML = `\n        <span class=\"placeholder-message\">${app.translator\n          .trans('archlinux-de-flarum-click-image.forum.load_button', { domain: hostname })\n          .join('')}</span>\n        <span class=\"error-message\">${app.translator\n          .trans('archlinux-de-flarum-click-image.forum.error_message', { domain: hostname })\n          .join('')}</span>\n      `;\n    return div;\n  }\n\n  #createStyle() {\n    const style = document.createElement('style');\n    style.innerHTML = styles;\n\n    return style;\n  }\n\n  #createImg() {\n    const img = document.createElement('img');\n    if (this.getAttribute('height') > 0) {\n      img.height = this.getAttribute('height');\n    }\n    if (this.getAttribute('width') > 0) {\n      img.height = this.getAttribute('width');\n    }\n    if (this.getAttribute('alt').length > 0) {\n      img.alt = this.getAttribute('alt');\n    }\n    if (this.getAttribute('title').length > 0) {\n      img.title = this.getAttribute('title');\n    }\n    img.src = this.getAttribute('src');\n    return img;\n  }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default \":host {\\n  --background-color: #ccc;\\n  --border-color: #ddd;\\n  --color: #333;\\n  --error-color: #f00;\\n}\\n\\ndiv {\\n  padding: 8px;\\n  box-sizing: border-box;\\n  border: 1px solid var(--border-color);\\n  height: 150px;\\n  width: 100%;\\n  max-width: 100%;\\n  display: inline-flex;\\n  justify-content: center;\\n  align-items: center;\\n  background-color: var(--background-color);\\n  cursor: pointer;\\n  transition:\\n    width 0.2s ease-in-out,\\n    height 0.2s ease-in-out;\\n}\\n\\nspan {\\n  font-family: sans-serif;\\n  font-size: 14px;\\n  color: var(--color);\\n}\\n\\na {\\n  color: unset;\\n}\\n\\n.error-message {\\n  display: none;\\n}\\n\\n.error .placeholder-message {\\n  display: none;\\n}\\n\\n.error .error-message {\\n  display: inline-block;\\n}\\n\\n.loading {\\n  cursor: wait;\\n}\\n\\n.loading span {\\n  display: none;\\n}\\n\\n.loading::before {\\n  content: ' ';\\n}\\n\\n.error {\\n  cursor: unset;\\n}\\n\\n.error span {\\n  color: var(--error-color);\\n}\\n\";","import app from 'flarum/forum/app';\nimport ClickImage from './ClickImage';\n\napp.initializers.add('archlinux-de/flarum-click-image', () => {\n  customElements.define('click-img', ClickImage);\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_getPrototypeOf","getPrototypeOf","_construct","Parent","args","Class","Reflect","construct","sham","Proxy","Boolean","valueOf","e","isNativeReflectConstruct","push","apply","instance","Function","arguments","_wrapNativeSuper","_cache","Map","undefined","fn","toString","indexOf","isNativeFunction","TypeError","has","set","Wrapper","this","constructor","create","writable","configurable","_classPrivateFieldBase","receiver","privateKey","id","_classPrivateFieldKey","name","_createPlaceholder","_classPrivateFieldLooseKey","_createStyle","_createImg","ClickImage","_HTMLElement","subClass","superClass","_this","_createImg2","_createStyle2","_createPlaceholder2","attachShadow","mode","connectedCallback","_this2","shadowRoot","appendChild","_classPrivateFieldLooseBase","src","getAttribute","hostname","startsWith","window","location","URL","placeHolder","addEventListener","event","classList","add","preventDefault","img","onerror","remove","onload","style","width","height","aspectRatio","setTimeout","replaceWith","once","HTMLElement","div","document","createElement","innerHTML","app","trans","domain","join","length","alt","title","customElements","define"],"sourceRoot":""}