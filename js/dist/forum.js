(()=>{var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const n=flarum.core.compat["forum/app"];var r=t.n(n);function o(t,e){return o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},o(t,e)}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function c(t,e,n){return c=a()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&o(i,n.prototype),i},c.apply(null,arguments)}function l(t){var e="function"==typeof Map?new Map:void 0;return l=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return c(t,arguments,i(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,t)},l(t)}var s=function(t){var e,n;function i(){var e;return(e=t.call(this)||this).attachShadow({mode:"open"}),e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.connectedCallback=function(){var t=this;this.shadowRoot.appendChild(this._createStyle());try{var e=this.getAttribute("src"),n=e.startsWith("/")?window.location.hostname:new URL(e).hostname,r=this._createPlaceholder(n);r.addEventListener("click",(function(e){r.classList.add("loading"),e.preventDefault();var n=t._createImg();n.onerror=function(){r.classList.remove("loading"),r.classList.add("error")},n.onload=function(){r.style.width="min("+n.width+"px, 100%)",r.style.height="auto",r.style.aspectRatio=n.width+" / "+n.height,setTimeout((function(){return t.replaceWith(n)}),200)}}),{once:!0}),this.shadowRoot.appendChild(r)}catch(t){var o=this._createPlaceholder(this.getAttribute("src"));o.classList.add("error"),this.shadowRoot.appendChild(o)}},a._createPlaceholder=function(t){var e=document.createElement("div");return e.innerHTML='\n        <span class="placeholder-message">'+r().translator.trans("archlinux-de-flarum-click-image.forum.load_button",{domain:t}).join("")+'</span>\n        <span class="error-message">'+r().translator.trans("archlinux-de-flarum-click-image.forum.error_message",{domain:t}).join("")+"</span>\n      ",e},a._createStyle=function(){var t=document.createElement("style");return t.innerHTML="\n        :host {\n          --background-color: #ccc;\n          --border-color: #ddd;\n          --color: #333;\n          --error-color: #f00;\n        }\n        div {\n          padding: 8px;\n          box-sizing: border-box;\n          border: 1px solid var(--border-color);\n          height: 150px;\n          width: 100%;\n          max-width: 100%;\n          display: inline-flex;\n          justify-content: center;\n          align-items: center;\n          background-color: var(--background-color);\n          cursor: pointer;\n          transition: width .2s ease-in-out, height .2s ease-in-out;\n        }\n        span {\n          font-family: sans-serif;\n          font-size: 14px;\n          color: var(--color);\n        }\n        a {\n          color: unset;\n        }\n        .error-message {\n          display: none;\n        }\n        .error .placeholder-message {\n          display: none;\n        }\n        .error .error-message {\n          display: inline-block;\n        }\n        .loading {\n          cursor: wait;\n        }\n        .loading span {\n          display: none;\n        }\n        .loading::before {\n          content: ' '\n        }\n        .error {\n          cursor: unset;\n        }\n        .error span {\n          color: var(--error-color);\n        }\n      ",t},a._createImg=function(){var t=document.createElement("img");return this.getAttribute("height")>0&&(t.height=this.getAttribute("height")),this.getAttribute("width")>0&&(t.height=this.getAttribute("width")),this.getAttribute("alt").length>0&&(t.alt=this.getAttribute("alt")),this.getAttribute("title").length>0&&(t.title=this.getAttribute("title")),t.src=this.getAttribute("src"),t},i}(l(HTMLElement));r().initializers.add("archlinux-de/flarum-click-image",(function(){customElements.define("click-img",s)}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map